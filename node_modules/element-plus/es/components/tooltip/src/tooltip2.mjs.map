{"version":3,"file":"tooltip2.mjs","sources":["../../../../../../packages/components/tooltip/src/tooltip.vue"],"sourcesContent":["<template>\n  <el-popper ref=\"popperRef\" :role=\"role\">\n    <el-tooltip-trigger\n      :disabled=\"disabled\"\n      :trigger=\"trigger\"\n      :trigger-keys=\"triggerKeys\"\n      :virtual-ref=\"virtualRef\"\n      :virtual-triggering=\"virtualTriggering\"\n      :focus-on-target=\"focusOnTarget\"\n    >\n      <slot v-if=\"$slots.default\" />\n    </el-tooltip-trigger>\n    <el-tooltip-content\n      ref=\"contentRef\"\n      :aria-label=\"ariaLabel\"\n      :boundaries-padding=\"boundariesPadding\"\n      :content=\"content\"\n      :disabled=\"disabled\"\n      :effect=\"effect\"\n      :enterable=\"enterable\"\n      :fallback-placements=\"fallbackPlacements\"\n      :hide-after=\"hideAfter\"\n      :gpu-acceleration=\"gpuAcceleration\"\n      :offset=\"offset\"\n      :persistent=\"persistent\"\n      :popper-class=\"kls\"\n      :popper-style=\"popperStyle\"\n      :placement=\"placement\"\n      :popper-options=\"popperOptions\"\n      :arrow-offset=\"arrowOffset\"\n      :pure=\"pure\"\n      :raw-content=\"rawContent\"\n      :reference-el=\"referenceEl\"\n      :trigger-target-el=\"triggerTargetEl\"\n      :show-after=\"showAfter\"\n      :strategy=\"strategy\"\n      :teleported=\"teleported\"\n      :transition=\"transition\"\n      :virtual-triggering=\"virtualTriggering\"\n      :z-index=\"zIndex\"\n      :append-to=\"appendTo\"\n      :loop=\"loop\"\n    >\n      <slot name=\"content\">\n        <span v-if=\"rawContent\" v-html=\"content\" />\n        <span v-else>{{ content }}</span>\n      </slot>\n      <el-popper-arrow v-if=\"showArrow\" />\n    </el-tooltip-content>\n  </el-popper>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  onBeforeUnmount,\n  onDeactivated,\n  provide,\n  readonly,\n  ref,\n  toRef,\n  unref,\n  watch,\n} from 'vue'\nimport { ElPopper, ElPopperArrow } from '@element-plus/components/popper'\nimport { isBoolean } from '@element-plus/utils'\nimport {\n  useDelayedToggle,\n  useId,\n  useNamespace,\n  usePopperContainer,\n} from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from './constants'\nimport { tooltipEmits, useTooltipModelToggle, useTooltipProps } from './tooltip'\nimport ElTooltipTrigger from './trigger.vue'\nimport ElTooltipContent from './content.vue'\n\nimport type { TooltipContentInstance } from './content'\nimport type { PopperInstance } from '@element-plus/components/popper'\n\ndefineOptions({\n  name: 'ElTooltip',\n})\n\nconst props = defineProps(useTooltipProps)\nconst emit = defineEmits(tooltipEmits)\n\nusePopperContainer()\n\nconst ns = useNamespace('tooltip')\nconst id = useId()\nconst popperRef = ref<PopperInstance>()\nconst contentRef = ref<TooltipContentInstance>()\n\nconst updatePopper = () => {\n  const popperComponent = unref(popperRef)\n  if (popperComponent) {\n    popperComponent.popperInstanceRef?.update()\n  }\n}\nconst open = ref(false)\nconst toggleReason = ref<Event>()\n\nconst { show, hide, hasUpdateHandler } = useTooltipModelToggle({\n  indicator: open,\n  toggleReason,\n})\n\nconst { onOpen, onClose } = useDelayedToggle({\n  showAfter: toRef(props, 'showAfter'),\n  hideAfter: toRef(props, 'hideAfter'),\n  autoClose: toRef(props, 'autoClose'),\n  open: show,\n  close: hide,\n})\n\nconst controlled = computed(\n  () => isBoolean(props.visible) && !hasUpdateHandler.value\n)\n\nconst kls = computed(() => {\n  return [ns.b(), props.popperClass!]\n})\n\nprovide(TOOLTIP_INJECTION_KEY, {\n  controlled,\n  id,\n  open: readonly(open),\n  trigger: toRef(props, 'trigger'),\n  onOpen,\n  onClose,\n  onToggle: (event?: Event) => {\n    if (unref(open)) {\n      onClose(event)\n    } else {\n      onOpen(event)\n    }\n  },\n  onShow: () => {\n    emit('show', toggleReason.value)\n  },\n  onHide: () => {\n    emit('hide', toggleReason.value)\n  },\n  onBeforeShow: () => {\n    emit('before-show', toggleReason.value)\n  },\n  onBeforeHide: () => {\n    emit('before-hide', toggleReason.value)\n  },\n  updatePopper,\n})\n\nwatch(\n  () => props.disabled,\n  (disabled) => {\n    if (disabled && open.value) {\n      open.value = false\n    }\n  }\n)\n\nconst isFocusInsideContent = (event?: FocusEvent) => {\n  return contentRef.value?.isFocusInsideContent(event)\n}\n\nonDeactivated(() => open.value && hide())\n\nonBeforeUnmount(() => {\n  toggleReason.value = undefined\n})\n\ndefineExpose({\n  /**\n   * @description el-popper component instance\n   */\n  popperRef,\n  /**\n   * @description el-tooltip-content component instance\n   */\n  contentRef,\n  /**\n   * @description validate current focus event is trigger inside el-tooltip-content\n   */\n  isFocusInsideContent,\n  /**\n   * @description update el-popper component instance\n   */\n  updatePopper,\n  /**\n   * @description expose onOpen function to mange el-tooltip open state\n   */\n  onOpen,\n  /**\n   * @description expose onClose function to manage el-tooltip close state\n   */\n  onClose,\n  /**\n   * @description expose hide function\n   */\n  hide,\n})\n</script>\n"],"names":["_createBlock","_unref","role","_createVNode","disabled","trigger","triggerKeys","virtualRef","virtualTriggering","focusOnTarget","$slots","_renderSlot","_createCommentVNode","ariaLabel","boundariesPadding","content","effect","enterable","fallbackPlacements","hideAfter","gpuAcceleration","offset","persistent","popperStyle","placement","popperOptions","arrowOffset","pure","rawContent","referenceEl","triggerTargetEl","showAfter","strategy","teleported","transition","zIndex","appendTo","loop","_createElementBlock","_openBlock","_toDisplayString","showArrow"],"mappings":"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"}