{"version":3,"file":"sub-menu.mjs","sources":["../../../../../../packages/components/menu/src/sub-menu.ts"],"sourcesContent":["import {\n  Fragment,\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  h,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  vShow,\n  watch,\n  withDirectives,\n} from 'vue'\nimport { useTimeoutFn } from '@vueuse/core'\nimport ElCollapseTransition from '@element-plus/components/collapse-transition'\nimport ElTooltip from '@element-plus/components/tooltip'\nimport {\n  buildProps,\n  definePropType,\n  focusElement,\n  iconPropType,\n  isString,\n  isUndefined,\n  throwError,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { ArrowDown, ArrowRight } from '@element-plus/icons-vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport useMenu from './use-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\nimport { MENU_INJECTION_KEY, SUB_MENU_INJECTION_KEY } from './tokens'\n\nimport type { Placement } from '@element-plus/components/popper'\nimport type { TooltipInstance } from '@element-plus/components/tooltip'\nimport type {\n  CSSProperties,\n  ExtractPropTypes,\n  ExtractPublicPropTypes,\n  VNodeArrayChildren,\n} from 'vue'\nimport type { MenuProvider, SubMenuProvider } from './types'\n\nexport const subMenuProps = buildProps({\n  /**\n   * @description unique identification\n   */\n  index: {\n    type: String,\n    required: true,\n  },\n  /**\n   * @description timeout before showing a sub-menu(inherit `show-timeout` of the menu by default.)\n   */\n  showTimeout: Number,\n  /**\n   * @description timeout before hiding a sub-menu(inherit `hide-timeout` of the menu by default.)\n   */\n  hideTimeout: Number,\n  /**\n   * @description custom class name for the popup menu\n   */\n  popperClass: String,\n  /**\n   * @description custom style for the popup menu\n   */\n  popperStyle: {\n    type: definePropType<string | CSSProperties>([String, Object]),\n  },\n  /**\n   * @description whether the sub-menu is disabled\n   */\n  disabled: Boolean,\n  /**\n   * @description whether popup menu is teleported to the body\n   */\n  teleported: {\n    type: Boolean,\n    default: undefined,\n  },\n  /**\n   * @description offset of the popper (overrides the `popper` of menu)\n   */\n  popperOffset: Number,\n  /**\n   * @description Icon when menu are expanded and submenu are closed, `expand-close-icon` and `expand-open-icon` need to be passed together to take effect\n   */\n  expandCloseIcon: {\n    type: iconPropType,\n  },\n  /**\n   * @description Icon when menu are expanded and submenu are opened, `expand-open-icon` and `expand-close-icon` need to be passed together to take effect\n   */\n  expandOpenIcon: {\n    type: iconPropType,\n  },\n  /**\n   * @description Icon when menu are collapsed and submenu are closed, `collapse-close-icon` and `collapse-open-icon` need to be passed together to take effect\n   */\n  collapseCloseIcon: {\n    type: iconPropType,\n  },\n  /**\n   * @description Icon when menu are collapsed and submenu are opened, `collapse-open-icon` and `collapse-close-icon` need to be passed together to take effect\n   */\n  collapseOpenIcon: {\n    type: iconPropType,\n  },\n} as const)\nexport type SubMenuProps = ExtractPropTypes<typeof subMenuProps>\nexport type SubMenuPropsPublic = ExtractPublicPropTypes<typeof subMenuProps>\n\nconst COMPONENT_NAME = 'ElSubMenu'\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  props: subMenuProps,\n\n  setup(props, { slots, expose }) {\n    const instance = getCurrentInstance()!\n    const { indexPath, parentMenu } = useMenu(\n      instance,\n      computed(() => props.index)\n    )\n    const nsMenu = useNamespace('menu')\n    const nsSubMenu = useNamespace('sub-menu')\n\n    // inject\n    const rootMenu = inject<MenuProvider>(MENU_INJECTION_KEY)\n    if (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\n    const subMenu = inject<SubMenuProvider>(\n      `${SUB_MENU_INJECTION_KEY}${parentMenu.value!.uid}`\n    )\n    if (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    let timeout: (() => void) | undefined\n    const mouseInChild = ref(false)\n    const verticalTitleRef = ref<HTMLDivElement>()\n    const vPopper = ref<TooltipInstance>()\n\n    // computed\n    const isFirstLevel = computed(() => subMenu.level === 0)\n    const currentPlacement = computed<Placement>(() =>\n      mode.value === 'horizontal' && isFirstLevel.value\n        ? 'bottom-start'\n        : 'right-start'\n    )\n    const subMenuTitleIcon = computed(() => {\n      const isExpandedMode =\n        (mode.value === 'horizontal' && isFirstLevel.value) ||\n        (mode.value === 'vertical' && !rootMenu.props.collapse)\n\n      if (isExpandedMode) {\n        if (props.expandCloseIcon && props.expandOpenIcon) {\n          return opened.value ? props.expandOpenIcon : props.expandCloseIcon\n        }\n        return ArrowDown\n      } else {\n        if (props.collapseCloseIcon && props.collapseOpenIcon) {\n          return opened.value ? props.collapseOpenIcon : props.collapseCloseIcon\n        }\n        return ArrowRight\n      }\n    })\n\n    const appendToBody = computed(() => {\n      const value = props.teleported\n      return isUndefined(value) ? isFirstLevel.value : value\n    })\n    const menuTransitionName = computed(() =>\n      rootMenu.props.collapse\n        ? `${nsMenu.namespace.value}-zoom-in-left`\n        : `${nsMenu.namespace.value}-zoom-in-top`\n    )\n    const fallbackPlacements = computed<Placement[]>(() =>\n      mode.value === 'horizontal' && isFirstLevel.value\n        ? [\n            'bottom-start',\n            'bottom-end',\n            'top-start',\n            'top-end',\n            'right-start',\n            'left-start',\n          ]\n        : [\n            'right-start',\n            'right',\n            'right-end',\n            'left-start',\n            'bottom-start',\n            'bottom-end',\n            'top-start',\n            'top-end',\n          ]\n    )\n    const opened = computed(() => rootMenu.openedMenus.includes(props.index))\n    const active = computed(() =>\n      [...Object.values(items.value), ...Object.values(subMenus.value)].some(\n        ({ active }) => active\n      )\n    )\n\n    const mode = computed(() => rootMenu.props.mode)\n    const persistent = computed(() => rootMenu.props.persistent)\n    const item = reactive({\n      index: props.index,\n      indexPath,\n      active,\n    })\n\n    const ulStyle = useMenuCssVar(rootMenu.props, subMenu.level + 1)\n\n    const subMenuPopperOffset = computed(\n      () => props.popperOffset ?? rootMenu.props.popperOffset\n    )\n\n    const subMenuPopperClass = computed(\n      () => props.popperClass ?? rootMenu.props.popperClass\n    )\n\n    const subMenuPopperStyle = computed(\n      () => props.popperStyle ?? rootMenu.props.popperStyle\n    )\n\n    const subMenuShowTimeout = computed(\n      () => props.showTimeout ?? rootMenu.props.showTimeout\n    )\n\n    const subMenuHideTimeout = computed(\n      () => props.hideTimeout ?? rootMenu.props.hideTimeout\n    )\n\n    // methods\n    const doDestroy = () =>\n      vPopper.value?.popperRef?.popperInstanceRef?.destroy()\n\n    const handleCollapseToggle = (value: boolean) => {\n      if (!value) {\n        doDestroy()\n      }\n    }\n\n    const handleClick = () => {\n      if (\n        (rootMenu.props.menuTrigger === 'hover' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (rootMenu.props.collapse && rootMenu.props.mode === 'vertical') ||\n        props.disabled\n      )\n        return\n\n      rootMenu.handleSubMenuClick({\n        index: props.index,\n        indexPath: indexPath.value,\n        active: active.value,\n      })\n    }\n\n    const handleMouseenter = (\n      event: MouseEvent | FocusEvent,\n      showTimeout = subMenuShowTimeout.value\n    ) => {\n      if (event.type === 'focus') return\n\n      if (\n        (rootMenu.props.menuTrigger === 'click' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (!rootMenu.props.collapse && rootMenu.props.mode === 'vertical') ||\n        props.disabled\n      ) {\n        subMenu.mouseInChild.value = true\n        return\n      }\n      subMenu.mouseInChild.value = true\n\n      timeout?.()\n      ;({ stop: timeout } = useTimeoutFn(() => {\n        rootMenu.openMenu(props.index, indexPath.value)\n      }, showTimeout))\n\n      if (appendToBody.value) {\n        parentMenu.value.vnode.el?.dispatchEvent(new MouseEvent('mouseenter'))\n      }\n\n      if (event.type === 'mouseenter' && event.target) {\n        nextTick(() => {\n          focusElement(event.target as HTMLElement, { preventScroll: true })\n        })\n      }\n    }\n\n    const handleMouseleave = (deepDispatch = false) => {\n      if (\n        (rootMenu.props.menuTrigger === 'click' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (!rootMenu.props.collapse && rootMenu.props.mode === 'vertical')\n      ) {\n        subMenu.mouseInChild.value = false\n        return\n      }\n      timeout?.()\n      subMenu.mouseInChild.value = false\n      ;({ stop: timeout } = useTimeoutFn(\n        () =>\n          !mouseInChild.value &&\n          rootMenu.closeMenu(props.index, indexPath.value),\n        subMenuHideTimeout.value\n      ))\n\n      if (appendToBody.value && deepDispatch) {\n        subMenu.handleMouseleave?.(true)\n      }\n    }\n\n    watch(\n      () => rootMenu.props.collapse,\n      (value) => handleCollapseToggle(Boolean(value))\n    )\n\n    // provide\n    {\n      const addSubMenu: SubMenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n      const removeSubMenu: SubMenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n      provide<SubMenuProvider>(`${SUB_MENU_INJECTION_KEY}${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        handleMouseleave,\n        mouseInChild,\n        level: subMenu.level + 1,\n      })\n    }\n\n    // expose\n    expose({\n      opened,\n    })\n\n    // lifecycle\n    onMounted(() => {\n      rootMenu.addSubMenu(item)\n      subMenu.addSubMenu(item)\n    })\n\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item)\n      rootMenu.removeSubMenu(item)\n    })\n\n    return () => {\n      const titleTag: VNodeArrayChildren = [\n        slots.title?.(),\n        h(\n          ElIcon,\n          {\n            class: nsSubMenu.e('icon-arrow'),\n            style: {\n              transform: opened.value\n                ? (props.expandCloseIcon && props.expandOpenIcon) ||\n                  (props.collapseCloseIcon &&\n                    props.collapseOpenIcon &&\n                    rootMenu.props.collapse)\n                  ? 'none'\n                  : 'rotateZ(180deg)'\n                : 'none',\n            },\n          },\n          {\n            default: () =>\n              isString(subMenuTitleIcon.value)\n                ? h(instance.appContext.components[subMenuTitleIcon.value])\n                : h(subMenuTitleIcon.value),\n          }\n        ),\n      ]\n\n      // this render function is only used for bypass `Vue`'s compiler caused patching issue.\n      const child = rootMenu.isMenuPopup\n        ? h(\n            ElTooltip,\n            {\n              ref: vPopper,\n              visible: opened.value,\n              effect: 'light',\n              pure: true,\n              offset: subMenuPopperOffset.value,\n              showArrow: false,\n              persistent: persistent.value,\n              popperClass: subMenuPopperClass.value,\n              popperStyle: subMenuPopperStyle.value,\n              placement: currentPlacement.value,\n              teleported: appendToBody.value,\n              fallbackPlacements: fallbackPlacements.value,\n              transition: menuTransitionName.value,\n              gpuAcceleration: false,\n            },\n            {\n              content: () =>\n                h(\n                  'div',\n                  {\n                    class: [\n                      nsMenu.m(mode.value),\n                      nsMenu.m('popup-container'),\n                      subMenuPopperClass.value,\n                    ],\n                    onMouseenter: (evt: MouseEvent) =>\n                      handleMouseenter(evt, 100),\n                    onMouseleave: () => handleMouseleave(true),\n                    onFocus: (evt: FocusEvent) => handleMouseenter(evt, 100),\n                  },\n                  [\n                    h(\n                      'ul',\n                      {\n                        class: [\n                          nsMenu.b(),\n                          nsMenu.m('popup'),\n                          nsMenu.m(`popup-${currentPlacement.value}`),\n                        ],\n                        style: ulStyle.value,\n                      },\n                      [slots.default?.()]\n                    ),\n                  ]\n                ),\n              default: () =>\n                h(\n                  'div',\n                  {\n                    class: nsSubMenu.e('title'),\n                    onClick: handleClick,\n                  },\n                  titleTag\n                ),\n            }\n          )\n        : h(Fragment, {}, [\n            h(\n              'div',\n              {\n                class: nsSubMenu.e('title'),\n                ref: verticalTitleRef,\n                onClick: handleClick,\n              },\n              titleTag\n            ),\n            h(\n              ElCollapseTransition,\n              {},\n              {\n                default: () =>\n                  withDirectives(\n                    h(\n                      'ul',\n                      {\n                        role: 'menu',\n                        class: [nsMenu.b(), nsMenu.m('inline')],\n                        style: ulStyle.value,\n                      },\n                      [slots.default?.()]\n                    ),\n                    [[vShow, opened.value]]\n                  ),\n              }\n            ),\n          ])\n\n      return h(\n        'li',\n        {\n          class: [\n            nsSubMenu.b(),\n            nsSubMenu.is('active', active.value),\n            nsSubMenu.is('opened', opened.value),\n            nsSubMenu.is('disabled', props.disabled),\n          ],\n          role: 'menuitem',\n          ariaHaspopup: true,\n          ariaExpanded: opened.value,\n          onMouseenter: handleMouseenter,\n          onMouseleave: () => handleMouseleave(),\n          onFocus: handleMouseenter,\n        },\n        [child]\n      )\n    }\n  },\n})\n"],"names":["active","item","_a"],"mappings":"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"}