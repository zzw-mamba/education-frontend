{"version":3,"file":"key-render-helper.mjs","sources":["../../../../../../../packages/components/table/src/table/key-render-helper.ts"],"sourcesContent":["import { onMounted, onUnmounted } from 'vue'\n\nimport type { Table } from './defaults'\n\nexport default function useKeyRender(table: Table<[]>) {\n  let observer: MutationObserver | undefined\n\n  const initWatchDom = () => {\n    const el = table.vnode.el\n    const columnsWrapper = (el as HTMLElement).querySelector('.hidden-columns')\n    const config = { childList: true, subtree: true }\n    const updateOrderFns = table.store.states.updateOrderFns\n    observer = new MutationObserver(() => {\n      updateOrderFns.forEach((fn: () => void) => fn())\n    })\n\n    observer.observe(columnsWrapper!, config)\n  }\n\n  onMounted(() => {\n    // fix https://github.com/element-plus/element-plus/issues/8528\n    initWatchDom()\n  })\n\n  onUnmounted(() => {\n    observer?.disconnect()\n  })\n}\n"],"names":[],"mappings":";;AAIA,SAAwB,aAAa,KAAkB,EAAA;AACrD,EAAI,IAAA,QAAA,CAAA;AAEJ,EAAA,MAAM,eAAe,MAAM;AACzB,IAAM,MAAA,EAAA,GAAK,MAAM,KAAM,CAAA,EAAA,CAAA;AACvB,IAAM,MAAA,cAAA,GAAkB,EAAmB,CAAA,aAAA,CAAc,iBAAiB,CAAA,CAAA;AAC1E,IAAA,MAAM,MAAS,GAAA,EAAE,SAAW,EAAA,IAAA,EAAM,SAAS,IAAK,EAAA,CAAA;AAChD,IAAM,MAAA,cAAA,GAAiB,KAAM,CAAA,KAAA,CAAM,MAAO,CAAA,cAAA,CAAA;AAC1C,IAAW,QAAA,GAAA,IAAI,iBAAiB,MAAM;AACpC,MAAA,cAAA,CAAe,OAAQ,CAAA,CAAC,EAAmB,KAAA,EAAA,EAAI,CAAA,CAAA;AAAA,KAChD,CAAA,CAAA;AAED,IAAS,QAAA,CAAA,OAAA,CAAQ,gBAAiB,MAAM,CAAA,CAAA;AAAA,GAC1C,CAAA;AAEA,EAAA,SAAA,CAAU,MAAM;AAEd,IAAa,YAAA,EAAA,CAAA;AAAA,GACd,CAAA,CAAA;AAED,EAAA,WAAA,CAAY,MAAM;AAChB,IAAU,QAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,QAAA,CAAA,UAAA,EAAA,CAAA;AAAA,GACX,CAAA,CAAA;AACH;;;;"}