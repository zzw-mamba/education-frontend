{"version":3,"file":"render-helper.js","sources":["../../../../../../../packages/components/table/src/table-body/render-helper.ts"],"sourcesContent":["import { computed, h, inject } from 'vue'\nimport { merge } from 'lodash-unified'\nimport { useNamespace } from '@element-plus/hooks'\nimport { isBoolean, isPropAbsent } from '@element-plus/utils'\nimport { getRowIdentity } from '../util'\nimport { TABLE_INJECTION_KEY } from '../tokens'\nimport useEvents from './events-helper'\nimport useStyles from './styles-helper'\nimport TdWrapper from './td-wrapper.vue'\n\nimport type { TableBodyProps } from './defaults'\nimport type {\n  DefaultRow,\n  RenderRowData,\n  Table,\n  TableColumnCtx,\n  TableProps,\n  TreeNode,\n} from '../table/defaults'\nimport type { TreeData } from '../store/tree'\nimport type { TableOverflowTooltipOptions } from '../util'\n\nfunction useRender<T extends DefaultRow>(props: Partial<TableBodyProps<T>>) {\n  const parent = inject(TABLE_INJECTION_KEY) as Table<T>\n  const ns = useNamespace('table')\n  const {\n    handleDoubleClick,\n    handleClick,\n    handleContextMenu,\n    handleMouseEnter,\n    handleMouseLeave,\n    handleCellMouseEnter,\n    handleCellMouseLeave,\n    tooltipContent,\n    tooltipTrigger,\n  } = useEvents(props)\n  const {\n    getRowStyle,\n    getRowClass,\n    getCellStyle,\n    getCellClass,\n    getSpan,\n    getColspanRealWidth,\n  } = useStyles(props)\n\n  let displayIndex = -1\n\n  const firstDefaultColumnIndex = computed(() => {\n    return props.store?.states.columns.value.findIndex(\n      ({ type }) => type === 'default'\n    )\n  })\n  const getKeyOfRow = (row: T, index: number) => {\n    const rowKey = (parent?.props as Partial<TableProps<T>>)?.rowKey\n    if (rowKey) {\n      return getRowIdentity(row, rowKey)\n    }\n    return index\n  }\n  const rowRender = (\n    row: T,\n    $index: number,\n    treeRowData?: TreeNode,\n    expanded = false\n  ) => {\n    const { tooltipEffect, tooltipOptions, store } = props\n    const { indent, columns } = store!.states\n    const rowClasses = []\n    let display = true\n    if (treeRowData) {\n      rowClasses.push(ns.em('row', `level-${treeRowData.level}`))\n      display = !!treeRowData.display\n    }\n    if ($index === 0) {\n      displayIndex = -1\n    }\n    if (props.stripe && display) {\n      displayIndex++\n    }\n    rowClasses.push(...getRowClass(row, $index, displayIndex))\n    const displayStyle = display ? null : { display: 'none' }\n    return h(\n      'tr',\n      {\n        style: [displayStyle, getRowStyle(row, $index)],\n        class: rowClasses,\n        key: getKeyOfRow(row, $index),\n        onDblclick: ($event: Event) => handleDoubleClick($event, row),\n        onClick: ($event: Event) => handleClick($event, row),\n        onContextmenu: ($event: Event) => handleContextMenu($event, row),\n        onMouseenter: () => handleMouseEnter($index),\n        onMouseleave: handleMouseLeave,\n      },\n      columns.value.map((column, cellIndex) => {\n        const { rowspan, colspan } = getSpan(row, column, $index, cellIndex)\n        if (!rowspan || !colspan) {\n          return null\n        }\n        const columnData = Object.assign({}, column)\n        columnData.realWidth = getColspanRealWidth(\n          columns.value,\n          colspan,\n          cellIndex\n        )\n        const data: RenderRowData<T> = {\n          store: store!,\n          _self: props.context || parent!,\n          column: columnData,\n          row,\n          $index,\n          cellIndex,\n          expanded,\n        }\n        if (cellIndex === firstDefaultColumnIndex.value && treeRowData) {\n          data.treeNode = {\n            indent: treeRowData.level && treeRowData.level * indent.value,\n            level: treeRowData.level,\n          }\n          if (isBoolean(treeRowData.expanded)) {\n            data.treeNode.expanded = treeRowData.expanded\n            // 表明是懒加载\n            if ('loading' in treeRowData) {\n              data.treeNode.loading = treeRowData.loading\n            }\n            if ('noLazyChildren' in treeRowData) {\n              data.treeNode.noLazyChildren = treeRowData.noLazyChildren\n            }\n          }\n        }\n        const baseKey = `${getKeyOfRow(row, $index)},${cellIndex}`\n        const patchKey = columnData.columnKey || columnData.rawColumnKey || ''\n        const mergedTooltipOptions =\n          column.showOverflowTooltip &&\n          merge(\n            {\n              effect: tooltipEffect,\n            },\n            tooltipOptions,\n            column.showOverflowTooltip\n          )\n        return h(\n          TdWrapper,\n          {\n            style: getCellStyle($index, cellIndex, row, column),\n            class: getCellClass($index, cellIndex, row, column, colspan - 1),\n            key: `${patchKey}${baseKey}`,\n            rowspan,\n            colspan,\n            onMouseenter: ($event: MouseEvent) =>\n              handleCellMouseEnter(\n                $event,\n                row,\n                mergedTooltipOptions as TableOverflowTooltipOptions\n              ),\n            onMouseleave: handleCellMouseLeave,\n          },\n          {\n            default: () => cellChildren(cellIndex, column, data),\n          }\n        )\n      })\n    )\n  }\n  const cellChildren = <T extends DefaultRow>(\n    _cellIndex: number,\n    column: TableColumnCtx<T>,\n    data: RenderRowData<T>\n  ) => {\n    return column.renderCell(data)\n  }\n\n  const wrappedRowRender = (row: T, $index: number) => {\n    const store = props.store!\n    const { isRowExpanded, assertRowKey } = store\n    const { treeData, lazyTreeNodeMap, childrenColumnName, rowKey } =\n      store.states\n    const columns = store.states.columns.value\n    const hasExpandColumn = columns.some(({ type }) => type === 'expand')\n    if (hasExpandColumn) {\n      const expanded = isRowExpanded(row)\n      const tr = rowRender(row, $index, undefined, expanded)\n      const renderExpanded = parent?.renderExpanded\n      if (!renderExpanded) {\n        console.error('[Element Error]renderExpanded is required.')\n        return tr\n      }\n\n      // 在没设置时候避免 h 执行\n      // 非保留模式且未展开时，直接返回\n      // 使用二维数组包装，避免修改 $index\n      const rows = [[tr]]\n\n      // 仅在需要时创建展开行（保留模式或展开状态）\n      if (parent.props.preserveExpandedContent || expanded) {\n        rows[0].push(\n          h(\n            'tr',\n            {\n              key: `expanded-row__${tr.key as string}`,\n              style: { display: expanded ? '' : 'none' },\n            },\n            [\n              h(\n                'td',\n                {\n                  colspan: columns.length,\n                  class: `${ns.e('cell')} ${ns.e('expanded-cell')}`,\n                },\n                [renderExpanded({ row, $index, store, expanded })]\n              ),\n            ]\n          )\n        )\n      }\n\n      return rows\n    } else if (Object.keys(treeData.value).length) {\n      assertRowKey()\n      // TreeTable 时，rowKey 必须由用户设定，不使用 getKeyOfRow 计算\n      // 在调用 rowRender 函数时，仍然会计算 rowKey，不太好的操作\n      const key = getRowIdentity(row, rowKey.value)\n      let cur = treeData.value[key]\n      let treeRowData = null\n      if (cur) {\n        treeRowData = {\n          expanded: cur.expanded,\n          level: cur.level,\n          display: true,\n          noLazyChildren: undefined as boolean | undefined,\n          loading: undefined as boolean | undefined,\n        }\n        if (isBoolean(cur.lazy)) {\n          if (treeRowData && isBoolean(cur.loaded) && cur.loaded) {\n            treeRowData.noLazyChildren = !(cur.children && cur.children.length)\n          }\n          treeRowData.loading = cur.loading\n        }\n      }\n      const tmp = [rowRender(row, $index, treeRowData ?? undefined)]\n      // 渲染嵌套数据\n      if (cur) {\n        // currentRow 记录的是 index，所以还需主动增加 TreeTable 的 index\n        let i = 0\n        const traverse = (children: T[], parent: TreeData) => {\n          if (!(children && children.length && parent)) return\n          children.forEach((node) => {\n            // 父节点的 display 状态影响子节点的显示状态\n            const innerTreeRowData: Partial<Record<string, any>> = {\n              display: parent.display && parent.expanded,\n              level: parent.level! + 1,\n              expanded: false,\n              noLazyChildren: false,\n              loading: false,\n            }\n            const childKey = getRowIdentity(node, rowKey.value)\n            if (isPropAbsent(childKey)) {\n              throw new Error('For nested data item, row-key is required.')\n            }\n            cur = { ...treeData.value[childKey] }\n            // 对于当前节点，分成有无子节点两种情况。\n            // 如果包含子节点的，设置 expanded 属性。\n            // 对于它子节点的 display 属性由它本身的 expanded 与 display 共同决定。\n            if (cur) {\n              innerTreeRowData.expanded = cur.expanded\n              // 懒加载的某些节点，level 未知\n              cur.level = cur.level || innerTreeRowData.level\n              cur.display = !!(cur.expanded && innerTreeRowData.display)\n              if (isBoolean(cur.lazy)) {\n                if (isBoolean(cur.loaded) && cur.loaded) {\n                  innerTreeRowData.noLazyChildren = !(\n                    cur.children && cur.children.length\n                  )\n                }\n                innerTreeRowData.loading = cur.loading\n              }\n            }\n            i++\n            tmp.push(rowRender(node, $index + i, innerTreeRowData))\n            if (cur) {\n              const nodes =\n                lazyTreeNodeMap.value[childKey] ||\n                node[childrenColumnName.value]\n              traverse(nodes, cur)\n            }\n          })\n        }\n        // 对于 root 节点，display 一定为 true\n        cur.display = true\n        const nodes =\n          lazyTreeNodeMap.value[key] || row[childrenColumnName.value]\n        traverse(nodes, cur)\n      }\n      return tmp\n    } else {\n      return rowRender(row, $index, undefined)\n    }\n  }\n\n  return {\n    wrappedRowRender,\n    tooltipContent,\n    tooltipTrigger,\n  }\n}\n\nexport default useRender\n"],"names":["inject","TABLE_INJECTION_KEY","useNamespace","useEvents","useStyles","computed","getRowIdentity","h","isBoolean","merge","TdWrapper","parent","isPropAbsent","nodes"],"mappings":"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"}