{"version":3,"file":"avatar2.js","sources":["../../../../../../packages/components/avatar/src/avatar.vue"],"sourcesContent":["<template>\n  <span :class=\"avatarClass\" :style=\"sizeStyle\">\n    <img\n      v-if=\"(src || srcSet) && !hasLoadError\"\n      :src=\"src\"\n      :alt=\"alt\"\n      :srcset=\"srcSet\"\n      :style=\"fitStyle\"\n      @error=\"handleError\"\n    />\n    <el-icon v-else-if=\"icon\">\n      <component :is=\"icon\" />\n    </el-icon>\n    <slot v-else />\n  </span>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, ref, watch } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { useNamespace } from '@element-plus/hooks'\nimport { addUnit, isNumber, isString } from '@element-plus/utils'\nimport { avatarEmits, avatarProps } from './avatar'\nimport { avatarGroupContextKey } from './constants'\n\nimport type { CSSProperties } from 'vue'\n\ndefineOptions({\n  name: 'ElAvatar',\n})\n\nconst props = defineProps(avatarProps)\nconst emit = defineEmits(avatarEmits)\n\nconst avatarGroupContext = inject(avatarGroupContextKey, undefined)\n\nconst ns = useNamespace('avatar')\n\nconst hasLoadError = ref(false)\n\nconst size = computed(() => props.size ?? avatarGroupContext?.size)\nconst shape = computed(\n  () => props.shape ?? avatarGroupContext?.shape ?? 'circle'\n)\n\nconst avatarClass = computed(() => {\n  const { icon } = props\n  const classList = [ns.b()]\n  if (isString(size.value)) classList.push(ns.m(size.value))\n  if (icon) classList.push(ns.m('icon'))\n  if (shape.value) classList.push(ns.m(shape.value))\n  return classList\n})\n\nconst sizeStyle = computed(() => {\n  return isNumber(size.value)\n    ? (ns.cssVarBlock({\n        size: addUnit(size.value)!,\n      }) as CSSProperties)\n    : undefined\n})\n\nconst fitStyle = computed<CSSProperties>(() => ({\n  objectFit: props.fit,\n}))\n\n// need reset hasLoadError to false if src changed\nwatch(\n  () => props.src,\n  () => (hasLoadError.value = false)\n)\n\nfunction handleError(e: Event) {\n  hasLoadError.value = true\n  emit('error', e)\n}\n</script>\n"],"names":["inject","avatarGroupContextKey","useNamespace","ref","computed","isString","isNumber","addUnit","watch","_openBlock","_createElementBlock","_normalizeClass","_normalizeStyle","src","srcSet","alt","icon","_createBlock","_unref","ElIcon","_withCtx","_resolveDynamicComponent","_renderSlot"],"mappings":"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"}