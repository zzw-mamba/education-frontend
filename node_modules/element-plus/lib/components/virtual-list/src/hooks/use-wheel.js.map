{"version":3,"file":"use-wheel.js","sources":["../../../../../../../packages/components/virtual-list/src/hooks/use-wheel.ts"],"sourcesContent":["import { cAF, isFirefox, rAF } from '@element-plus/utils'\nimport { HORIZONTAL } from '../defaults'\n\nimport type { ComputedRef } from 'vue'\nimport type { LayoutDirection } from '../types'\n\ninterface ListWheelState {\n  atStartEdge: ComputedRef<boolean> // exclusive to reachEnd\n  atEndEdge: ComputedRef<boolean>\n  layout: ComputedRef<LayoutDirection>\n}\n\ntype ListWheelHandler = (offset: number) => void\n\nconst useWheel = (\n  { atEndEdge, atStartEdge, layout }: ListWheelState,\n  onWheelDelta: ListWheelHandler\n) => {\n  let frameHandle: number\n  let offset = 0\n\n  const hasReachedEdge = (offset: number) => {\n    const edgeReached =\n      (offset < 0 && atStartEdge.value) || (offset > 0 && atEndEdge.value)\n\n    return edgeReached\n  }\n\n  const onWheel = (e: WheelEvent) => {\n    cAF(frameHandle)\n\n    let { deltaX, deltaY } = e\n    // Special case for windows machine with shift key + wheel scrolling\n    if (e.shiftKey && deltaY !== 0) {\n      deltaX = deltaY\n      deltaY = 0\n    }\n\n    const newOffset = layout.value === HORIZONTAL ? deltaX : deltaY\n\n    if (hasReachedEdge(newOffset)) return\n\n    offset += newOffset\n\n    if (!isFirefox() && newOffset !== 0) {\n      e.preventDefault()\n    }\n\n    frameHandle = rAF(() => {\n      onWheelDelta(offset)\n      offset = 0\n    })\n  }\n\n  return {\n    hasReachedEdge,\n    onWheel,\n  }\n}\n\nexport default useWheel\n"],"names":["offset","cAF","HORIZONTAL","isFirefox","rAF"],"mappings":";;;;;;;;AAcA,MAAM,WAAW,CACf,EAAE,WAAW,WAAa,EAAA,MAAA,IAC1B,YACG,KAAA;AACH,EAAI,IAAA,WAAA,CAAA;AACJ,EAAA,IAAI,MAAS,GAAA,CAAA,CAAA;AAEb,EAAM,MAAA,cAAA,GAAiB,CAACA,OAAmB,KAAA;AACzC,IAAA,MAAM,cACHA,OAAS,GAAA,CAAA,IAAK,YAAY,KAAWA,IAAAA,OAAAA,GAAS,KAAK,SAAU,CAAA,KAAA,CAAA;AAEhE,IAAO,OAAA,WAAA,CAAA;AAAA,GACT,CAAA;AAEA,EAAM,MAAA,OAAA,GAAU,CAAC,CAAkB,KAAA;AACjC,IAAAC,OAAA,CAAI,WAAW,CAAA,CAAA;AAEf,IAAI,IAAA,EAAE,MAAQ,EAAA,MAAA,EAAW,GAAA,CAAA,CAAA;AAEzB,IAAI,IAAA,CAAA,CAAE,QAAY,IAAA,MAAA,KAAW,CAAG,EAAA;AAC9B,MAAS,MAAA,GAAA,MAAA,CAAA;AACT,MAAS,MAAA,GAAA,CAAA,CAAA;AAAA,KACX;AAEA,IAAA,MAAM,SAAY,GAAA,MAAA,CAAO,KAAU,KAAAC,mBAAA,GAAa,MAAS,GAAA,MAAA,CAAA;AAEzD,IAAA,IAAI,eAAe,SAAS,CAAA;AAAG,MAAA,OAAA;AAE/B,IAAU,MAAA,IAAA,SAAA,CAAA;AAEV,IAAA,IAAI,CAACC,iBAAA,EAAe,IAAA,SAAA,KAAc,CAAG,EAAA;AACnC,MAAA,CAAA,CAAE,cAAe,EAAA,CAAA;AAAA,KACnB;AAEA,IAAA,WAAA,GAAcC,QAAI,MAAM;AACtB,MAAA,YAAA,CAAa,MAAM,CAAA,CAAA;AACnB,MAAS,MAAA,GAAA,CAAA,CAAA;AAAA,KACV,CAAA,CAAA;AAAA,GACH,CAAA;AAEA,EAAO,OAAA;AAAA,IACL,cAAA;AAAA,IACA,OAAA;AAAA,GACF,CAAA;AACF;;;;"}