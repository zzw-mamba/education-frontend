{"version":3,"file":"row.js","sources":["../../../../../../../packages/components/table-v2/src/renderers/row.tsx"],"sourcesContent":["import { Row } from '../components'\nimport { tryCall } from '../utils'\n\nimport type {\n  ComponentInternalInstance,\n  FunctionalComponent,\n  UnwrapNestedRefs,\n} from 'vue'\nimport type { UseNamespaceReturn } from '@element-plus/hooks'\nimport type { UseTableReturn } from '../use-table'\nimport type { TableV2Props } from '../table'\nimport type { TableGridRowSlotParams } from '../table-grid'\n\ntype RowRendererProps = TableGridRowSlotParams &\n  Pick<\n    TableV2Props,\n    | 'expandColumnKey'\n    | 'estimatedRowHeight'\n    | 'rowProps'\n    | 'rowClass'\n    | 'rowKey'\n    | 'rowEventHandlers'\n  > &\n  UnwrapNestedRefs<\n    Pick<\n      UseTableReturn,\n      | 'depthMap'\n      | 'expandedRowKeys'\n      | 'hasFixedColumns'\n      | 'onRowHovered'\n      | 'onRowExpanded'\n      | 'columnsStyles'\n    >\n  > & {\n    ns: UseNamespaceReturn\n    tableInstance?: ComponentInternalInstance\n  }\n\nconst RowRenderer: FunctionalComponent<RowRendererProps> = (\n  props,\n  { slots }\n) => {\n  const {\n    columns,\n    columnsStyles,\n    depthMap,\n    expandColumnKey,\n    expandedRowKeys,\n    estimatedRowHeight,\n    hasFixedColumns,\n    rowData,\n    rowIndex,\n    style,\n    isScrolling,\n    rowProps,\n    rowClass,\n    rowKey,\n    rowEventHandlers,\n    ns,\n    onRowHovered,\n    onRowExpanded,\n  } = props\n\n  const rowKls = tryCall(rowClass, { columns, rowData, rowIndex }, '')\n  const additionalProps = tryCall(rowProps, {\n    columns,\n    rowData,\n    rowIndex,\n  })\n  const _rowKey = rowData[rowKey]\n  const depth = depthMap[_rowKey] || 0\n  const canExpand = Boolean(expandColumnKey)\n  const isFixedRow = rowIndex < 0\n  const kls = [\n    ns.e('row'),\n    rowKls,\n    ns.is('expanded', canExpand && expandedRowKeys.includes(_rowKey)),\n    ns.is('fixed', !depth && isFixedRow),\n    ns.is('customized', Boolean(slots.row)),\n    {\n      [ns.e(`row-depth-${depth}`)]: canExpand && rowIndex >= 0,\n    },\n  ]\n\n  const onRowHover = hasFixedColumns ? onRowHovered : undefined\n\n  const _rowProps = {\n    ...additionalProps,\n    columns,\n    columnsStyles,\n    class: kls,\n    depth,\n    expandColumnKey,\n    estimatedRowHeight: isFixedRow ? undefined : estimatedRowHeight,\n    isScrolling,\n    rowIndex,\n    rowData,\n    rowKey: _rowKey,\n    rowEventHandlers,\n    style,\n  }\n\n  const handlerMouseEnter = (e: MouseEvent) => {\n    onRowHover?.({\n      hovered: true,\n      rowKey: _rowKey,\n      event: e,\n      rowData,\n      rowIndex,\n    })\n  }\n\n  const handlerMouseLeave = (e: MouseEvent) => {\n    onRowHover?.({\n      hovered: false,\n      rowKey: _rowKey,\n      event: e,\n      rowData,\n      rowIndex,\n    })\n  }\n\n  return (\n    <Row\n      {..._rowProps}\n      onRowExpand={onRowExpanded}\n      onMouseenter={handlerMouseEnter}\n      onMouseleave={handlerMouseLeave}\n      rowkey={_rowKey}\n    >\n      {slots}\n    </Row>\n  )\n}\n\nexport default RowRenderer\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","RowRenderer","props","slots","columns","columnsStyles","depthMap","expandColumnKey","expandedRowKeys","estimatedRowHeight","hasFixedColumns","rowData","rowIndex","style","isScrolling","rowProps","rowClass","rowKey","rowEventHandlers","ns","onRowHovered","onRowExpanded","rowKls","tryCall","additionalProps","_rowKey","depth","canExpand","Boolean","isFixedRow","kls","e","is","includes","row","onRowHover","undefined","_rowProps","class","handlerMouseEnter","hovered","event","handlerMouseLeave","_createVNode","Row","_mergeProps","default"],"mappings":"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"}