{"version":3,"file":"dropdown-item-impl.js","sources":["../../../../../../packages/components/dropdown/src/dropdown-item-impl.vue"],"sourcesContent":["<template>\n  <li\n    v-if=\"divided\"\n    role=\"separator\"\n    :class=\"ns.bem('menu', 'item', 'divided')\"\n  />\n  <li\n    :ref=\"itemRef\"\n    v-bind=\"{ ...dataset, ...$attrs }\"\n    :aria-disabled=\"disabled\"\n    :class=\"[ns.be('menu', 'item'), ns.is('disabled', disabled)]\"\n    :tabindex=\"tabIndex\"\n    :role=\"role\"\n    @click=\"(e) => $emit('clickimpl', e)\"\n    @focus=\"handleFocus\"\n    @keydown.self=\"handleKeydown\"\n    @mousedown=\"handleMousedown\"\n    @pointermove=\"(e) => $emit('pointermove', e)\"\n    @pointerleave=\"(e) => $emit('pointerleave', e)\"\n  >\n    <el-icon v-if=\"icon || $slots.icon\">\n      <slot name=\"icon\">\n        <component :is=\"icon\" />\n      </slot>\n    </el-icon>\n    <slot />\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject } from 'vue'\nimport {\n  ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,\n  ROVING_FOCUS_ITEM_COLLECTION_INJECTION_KEY,\n} from '@element-plus/components/roving-focus-group'\nimport { COLLECTION_ITEM_SIGN } from '@element-plus/components/collection'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { useNamespace } from '@element-plus/hooks'\nimport {\n  composeEventHandlers,\n  composeRefs,\n  getEventCode,\n} from '@element-plus/utils'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { dropdownItemProps } from './dropdown'\nimport { DROPDOWN_INJECTION_KEY } from './tokens'\n\nexport default defineComponent({\n  name: 'DropdownItemImpl',\n  components: {\n    ElIcon,\n  },\n  props: dropdownItemProps,\n  emits: ['pointermove', 'pointerleave', 'click', 'clickimpl'],\n  setup(_, { emit }) {\n    const ns = useNamespace('dropdown')\n\n    const { role: menuRole } = inject(DROPDOWN_INJECTION_KEY, undefined)!\n\n    const { collectionItemRef: rovingFocusCollectionItemRef } = inject(\n      ROVING_FOCUS_ITEM_COLLECTION_INJECTION_KEY,\n      undefined\n    )!\n\n    const {\n      rovingFocusGroupItemRef,\n      tabIndex,\n      handleFocus,\n      handleKeydown: handleItemKeydown,\n      handleMousedown,\n    } = inject(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY, undefined)!\n\n    const itemRef = composeRefs(\n      rovingFocusCollectionItemRef,\n      rovingFocusGroupItemRef\n    )\n\n    const role = computed<string>(() => {\n      if (menuRole.value === 'menu') {\n        return 'menuitem'\n      } else if (menuRole.value === 'navigation') {\n        return 'link'\n      }\n      return 'button'\n    })\n\n    const handleKeydown = composeEventHandlers((e: KeyboardEvent) => {\n      const code = getEventCode(e)\n\n      if (\n        [EVENT_CODE.enter, EVENT_CODE.numpadEnter, EVENT_CODE.space].includes(\n          code\n        )\n      ) {\n        e.preventDefault()\n        e.stopImmediatePropagation()\n        emit('clickimpl', e)\n        return true\n      }\n    }, handleItemKeydown)\n\n    return {\n      ns,\n      itemRef,\n      dataset: {\n        [COLLECTION_ITEM_SIGN]: '',\n      },\n      role,\n      tabIndex,\n      handleFocus,\n      handleKeydown,\n      handleMousedown,\n    }\n  },\n})\n</script>\n"],"names":["defineComponent","ElIcon","dropdownItemProps","useNamespace","inject","DROPDOWN_INJECTION_KEY","ROVING_FOCUS_ITEM_COLLECTION_INJECTION_KEY","ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY","composeRefs","computed","composeEventHandlers","getEventCode","EVENT_CODE","COLLECTION_ITEM_SIGN","_openBlock","_createElementBlock","_normalizeClass","_createElementVNode","_mergeProps","_createBlock","_withCtx","_renderSlot","_resolveDynamicComponent"],"mappings":"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"}